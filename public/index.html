<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <title>HamTab - Amateur Radio Dashboard | POTA, SOTA, DX Spots & Propagation</title>
  <meta name="description" content="Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting. Real-time propagation, satellite tracking, space weather, and more. Free alternative to HamClock.">
  <meta name="keywords" content="amateur radio, ham radio, POTA, SOTA, DX cluster, propagation, HamClock, satellite tracking, space weather, ham radio dashboard">
  <meta name="author" content="Steven C Heist (KJ5MMO), Francisco J Peebles (KG5DPV)">
  <meta name="theme-color" content="#1a1a1a">

  <!-- Open Graph Meta Tags (Facebook, Discord, LinkedIn) -->
  <meta property="og:title" content="HamTab - Amateur Radio Dashboard">
  <meta property="og:description" content="Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting. Real-time propagation, satellite tracking, and space weather.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hamtab.net">
  <meta property="og:image" content="https://hamtab.net/og-image.png">
  <meta property="og:site_name" content="HamTab">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="HamTab - Amateur Radio Dashboard">
  <meta name="twitter:description" content="Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting.">
  <meta name="twitter:image" content="https://hamtab.net/og-image.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://hamtab.net">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "HamTab",
    "applicationCategory": "WebApplication",
    "operatingSystem": "Any (Web Browser)",
    "description": "Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting with real-time propagation, satellite tracking, and space weather monitoring. Free alternative to HamClock.",
    "url": "https://hamtab.net",
    "author": [
      {
        "@type": "Person",
        "name": "Steven C Heist",
        "additionalName": "KJ5MMO"
      },
      {
        "@type": "Person",
        "name": "Francisco J Peebles",
        "additionalName": "KG5DPV"
      }
    ],
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "Real-time POTA spot tracking",
      "SOTA activations monitoring",
      "DX cluster integration",
      "PSKReporter integration",
      "Space weather and solar conditions",
      "Satellite tracking",
      "Interactive world map with gray line",
      "Weather alerts and conditions",
      "Propagation modeling"
    ]
  }
  </script>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="vendor/leaflet.css" />
  <link rel="stylesheet" href="vendor/MarkerCluster.css" />
  <link rel="stylesheet" href="vendor/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- SEO Content (hidden from normal users, visible to search engines and no-JS users) -->
  <noscript>
    <div style="padding: 2rem; max-width: 800px; margin: 0 auto; font-family: system-ui, -apple-system, sans-serif; line-height: 1.6;">
      <h1>HamTab - Modern Amateur Radio Dashboard</h1>
      <p style="font-size: 1.2rem; color: #666;">HamTab is a free, open-source amateur radio dashboard designed as a modern alternative to HamClock. Track POTA and SOTA activations, monitor DX clusters, view real-time propagation conditions, and track satellitesâ€”all in your web browser.</p>

      <h2>Features</h2>
      <ul style="column-count: 2; column-gap: 2rem;">
        <li>Real-time POTA (Parks on the Air) spot tracking</li>
        <li>SOTA (Summits on the Air) activations</li>
        <li>DX cluster integration</li>
        <li>PSKReporter integration</li>
        <li>Space weather and solar conditions</li>
        <li>Satellite tracking with N2YO integration</li>
        <li>Interactive world map with gray line</li>
        <li>Weather alerts and conditions (NWS, Weather Underground)</li>
        <li>Propagation modeling and ionosonde data</li>
        <li>Multi-source filtering and watch lists</li>
        <li>Configurable widgets with drag-and-drop</li>
        <li>Dark theme optimized for ham shack use</li>
      </ul>

      <h2>Deployment Options</h2>
      <p>HamTab supports two deployment modes:</p>
      <ul>
        <li><strong>Self-Hosted (Lanmode):</strong> Run on Windows, Linux, or Raspberry Pi with full local control</li>
        <li><strong>Cloud-Hosted (Hostedmode):</strong> Access via hamtab.net with no installation required</li>
      </ul>

      <h2>HamClock Alternative</h2>
      <p>With HamClock installations ceasing to function in June 2026, HamTab provides a modern, actively maintained alternative for the ~10,000+ HamClock users. Built with a stateless architecture and publicly available APIs, HamTab will continue functioning indefinitely.</p>

      <div style="margin-top: 2rem; padding: 1rem; background: #f0f0f0; border-radius: 8px;">
        <p style="margin: 0; color: #c00;"><strong>JavaScript Required:</strong> Please enable JavaScript in your browser to use HamTab.</p>
      </div>
    </div>
  </noscript>

  <!-- Splash screen -->
  <div class="splash-overlay" id="splash">
    <div class="splash-box config-box">
      <h2>HamTab Configuration</h2>

      <div class="config-tabs">
        <button type="button" class="config-tab active" data-tab="station">Station</button>
        <button type="button" class="config-tab" data-tab="display">Display</button>
        <button type="button" class="config-tab" data-tab="appearance">Appearance</button>
        <button type="button" class="config-tab" data-tab="services">Services</button>
        <button type="button" class="config-tab" data-tab="about">About</button>
      </div>

      <div class="config-panels">
        <!-- Tab 1: Station -->
        <div class="config-panel active" data-panel="station">
          <label for="splashCallsign">Your Callsign</label>
          <input type="text" id="splashCallsign" placeholder="e.g. W1AW" autocomplete="off" spellcheck="false" />

          <div class="splash-divider"></div>

          <div class="splash-loc-header">
            <span class="splash-loc-title">Location Override</span>
            <button type="button" class="splash-gps-btn" id="splashGpsBtn">Use GPS</button>
          </div>

          <div class="splash-loc-fields">
            <div class="splash-loc-row">
              <div class="splash-field">
                <label for="splashLat">Lat</label>
                <input type="text" id="splashLat" placeholder="e.g. 41.71" autocomplete="off" spellcheck="false" />
              </div>
              <div class="splash-field">
                <label for="splashLon">Lon</label>
                <input type="text" id="splashLon" placeholder="e.g. -72.73" autocomplete="off" spellcheck="false" />
              </div>
            </div>
          </div>

          <div class="splash-grid-wrap">
            <label for="splashGrid">Grid Square</label>
            <input type="text" id="splashGrid" placeholder="e.g. FN31" autocomplete="off" spellcheck="false" />
            <div class="splash-grid-dropdown" id="splashGridDropdown"></div>
          </div>

          <div class="splash-loc-status" id="splashLocStatus"></div>

          <div class="splash-divider"></div>
          <div class="splash-time-format">
            <span class="splash-loc-title">Time Format</span>
            <div class="splash-time-options">
              <label><input type="radio" name="timeFormat" value="12" id="timeFmt12"> 12-hour</label>
              <label><input type="radio" name="timeFormat" value="24" id="timeFmt24"> 24-hour</label>
            </div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-units-section">
            <span class="splash-loc-title">Units</span>
            <div class="splash-units-row">
              <span class="splash-units-label">Distance:</span>
              <div class="splash-units-options">
                <label><input type="radio" name="distanceUnit" value="mi" id="distUnitMi"> mi</label>
                <label><input type="radio" name="distanceUnit" value="km" id="distUnitKm"> km</label>
              </div>
            </div>
            <div class="splash-units-row">
              <span class="splash-units-label">Temperature:</span>
              <div class="splash-units-options">
                <label><input type="radio" name="tempUnit" value="F" id="tempUnitF"> Â°F</label>
                <label><input type="radio" name="tempUnit" value="C" id="tempUnitC"> Â°C</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab 2: Display -->
        <div class="config-panel" data-panel="display">
          <div class="splash-widgets-section">
            <span class="splash-loc-title">Widgets</span>
            <div class="splash-widget-list" id="splashWidgetList"></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-grid-mode-section" id="gridModeSection">
            <span class="splash-loc-title">Layout Mode</span>
            <div class="splash-layout-mode-toggle">
              <label><input type="radio" name="layoutMode" value="float" id="layoutModeFloat"> Free Float</label>
              <label><input type="radio" name="layoutMode" value="grid" id="layoutModeGrid"> Grid</label>
            </div>
            <div class="splash-grid-perm-section" id="gridPermSection" style="display:none;">
              <label for="gridPermSelect">Grid Layout</label>
              <select id="gridPermSelect"></select>
              <div class="grid-perm-preview" id="gridPermPreview"></div>
            </div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-layout-section">
            <span class="splash-loc-title">Layout</span>
            <div class="splash-layout-actions">
              <button type="button" class="splash-layout-btn" id="splashSaveLayout">Save as My Default</button>
              <button type="button" class="splash-layout-btn" id="splashClearLayout">Reset to App Default</button>
            </div>
            <div class="splash-layout-status" id="splashLayoutStatus"></div>
          </div>
        </div>

        <!-- Tab 3: Appearance -->
        <div class="config-panel" data-panel="appearance">
          <div class="splash-theme-section">
            <span class="splash-loc-title">Theme</span>
            <div class="theme-selector" id="themeSelector"></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-header-section">
            <span class="splash-loc-title">Header</span>
            <label class="config-toggle">
              <input type="checkbox" id="cfgSlimHeader" />
              Compact header (hides weather &amp; name, shrinks clocks)
            </label>
          </div>
        </div>

        <!-- Tab 4: Services -->
        <div class="config-panel" data-panel="services">
          <div class="splash-wx-section">
            <span class="splash-loc-title">Weather Station (optional)</span>
            <input type="text" id="splashWxStation" placeholder="e.g. KCTBRIDG45" autocomplete="off" spellcheck="false" style="text-transform:uppercase;margin-top:6px;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;">Weather Underground station ID</div>
            <label for="splashWxApiKey">WU API Key</label>
            <input type="text" id="splashWxApiKey" placeholder="Weather Underground API key" autocomplete="off" spellcheck="false" style="text-transform:none;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;"><a href="https://www.wunderground.com/member/api-keys" target="_blank" style="color:var(--accent);">Get a free API key</a></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-sat-section">
            <span class="splash-loc-title">Satellite Tracking (optional)</span>
            <label for="splashN2yoApiKey">N2YO API Key</label>
            <input type="text" id="splashN2yoApiKey" placeholder="N2YO API key for satellite tracking" autocomplete="off" spellcheck="false" style="text-transform:none;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;"><a href="https://www.n2yo.com/api/" target="_blank" style="color:var(--accent);">Get a free API key (1000 req/hr)</a></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-update-section">
            <span class="splash-loc-title">Update Check Interval</span>
            <select id="splashUpdateInterval">
              <option value="60">60 seconds</option>
              <option value="900">15 minutes</option>
              <option value="3600">60 minutes</option>
              <option value="21600">6 hours</option>
              <option value="86400">24 hours</option>
            </select>
          </div>
        </div>

        <!-- Tab 5: About -->
        <div class="config-panel" data-panel="about">
          <div class="about-content">
            <h3>HamTab</h3>
            <p class="about-version">Version <span id="aboutVersion"></span></p>

            <h4>Developers</h4>
            <p>Steven C Heist (KJ5MMO)<br>Francisco J Peebles (KG5DPV)</p>

            <h4>Inspiration</h4>
            <p>HamTab is inspired by <a href="https://www.clearskyinstitute.com/ham/HamClock/" target="_blank" rel="noopener">HamClock</a> by Elwood Downey (WB0OEW). Thank you for creating such an invaluable tool for the amateur radio community.</p>

            <h4>Data Sources</h4>
            <ul class="about-links">
              <li><a href="https://pota.app" target="_blank" rel="noopener">POTA</a> â€” Parks on the Air</li>
              <li><a href="https://www.sota.org.uk" target="_blank" rel="noopener">SOTA</a> â€” Summits on the Air</li>
              <li><a href="https://pskreporter.info" target="_blank" rel="noopener">PSKReporter</a> â€” Live spots</li>
              <li><a href="https://www.n2yo.com" target="_blank" rel="noopener">N2YO</a> â€” Satellite tracking</li>
              <li><a href="https://www.voacap.com" target="_blank" rel="noopener">VOACAP</a> â€” HF propagation</li>
              <li><a href="https://www.hamqsl.com" target="_blank" rel="noopener">HamQSL</a> â€” Solar data</li>
              <li><a href="https://www.contestcalendar.com/" target="_blank" rel="noopener">WA7BNM</a> â€” Contest calendar</li>
              <li><a href="https://www.ng3k.com" target="_blank" rel="noopener">NG3K</a> â€” DXpeditions</li>
              <li><a href="https://www.ncdxf.org/beacon/" target="_blank" rel="noopener">NCDXF</a> â€” HF beacons</li>
              <li><a href="https://www.weather.gov" target="_blank" rel="noopener">NOAA/NWS</a> â€” Weather</li>
              <li><a href="https://sdo.gsfc.nasa.gov" target="_blank" rel="noopener">SDO</a> â€” Solar imagery</li>
            </ul>

            <h4>Open Source</h4>
            <p><a href="https://github.com/stevencheist/HamTabv1" target="_blank" rel="noopener">View on GitHub</a></p>
          </div>
        </div>
      </div>

      <div class="splash-version">Version: <span id="splashVersion"></span></div>
      <button id="splashOk">OK</button>
    </div>
  </div>

  <!-- Solar field config overlay -->
  <div class="splash-overlay hidden" id="solarCfgSplash">
    <div class="splash-box solar-cfg-box">
      <h2>Solar &amp; Propagation Fields</h2>
      <div class="splash-widget-list" id="solarFieldList"></div>
      <button id="solarCfgOk">OK</button>
    </div>
  </div>

  <!-- Lunar field config overlay -->
  <div class="splash-overlay hidden" id="lunarCfgSplash">
    <div class="splash-box lunar-cfg-box">
      <h2>Lunar / EME Fields</h2>
      <div class="splash-widget-list" id="lunarFieldList"></div>
      <button id="lunarCfgOk">OK</button>
    </div>
  </div>

  <!-- Spot column config overlay -->
  <div class="splash-overlay hidden" id="spotColCfgSplash">
    <div class="splash-box spot-col-cfg-box">
      <h2>Table Columns</h2>
      <div class="splash-widget-list" id="spotColFieldList"></div>
      <button id="spotColCfgOk">OK</button>
    </div>
  </div>

  <header>
    <div class="header-left">
      <div class="op-info">
        <div class="op-call" id="opCall"></div>
        <div class="op-name" id="opName"></div>
        <div class="op-loc" id="opLoc">Location unknown</div>
      </div>
      <div class="op-btns">
        <button class="op-btn" id="editCallBtn" title="Configuration">Config</button>
        <button class="op-btn" id="refreshLocBtn" title="Refresh location">Loc</button>
      </div>
    </div>
    <div class="header-center">
      <div class="header-clock-group">
        <div class="wx-alert-badge hidden" id="wxAlertBadge">&#9888;</div>
        <div class="header-clock" id="headerClockLocal">
          <div class="header-clock-label">Local</div>
          <div class="header-clock-wx-icon" id="clockWxIcon"></div>
          <div class="header-clock-time" id="clockLocalTime"></div>
          <div class="header-clock-weather" id="clockLocalWeather"></div>
          <div class="wx-source-logo hidden" id="wxSourceLogo" title="Weather data source"></div>
        </div>
      </div>
      <div class="header-clock" id="headerClockUtc">
        <div class="header-clock-label">UTC</div>
        <div class="header-clock-time" id="clockUtcTime"></div>
      </div>
    </div>
    <div class="header-right">
      <span class="last-updated" id="lastUpdated"></span>
      <span class="countdown" id="countdown"></span>
      <label class="auto-refresh-toggle">
        <input type="checkbox" id="autoRefresh" checked />
        Auto-refresh
      </label>
      <button id="refreshBtn">Refresh</button>
      <button id="resetLayoutBtn" title="Reset widget layout">Reset Layout</button>
      <button id="fullscreenBtn" title="Toggle fullscreen">Fullscreen</button>
      <button id="feedbackBtn" class="feedback-btn" title="Send feedback to developers">ðŸ’¬ Feedback</button>
      <a href="https://buymeacoffee.com/stevencheist" target="_blank" rel="noopener" class="coffee-btn" title="Support HamTab development">â˜• Buy Me a Coffee</a>
      <span class="platform-label" id="platformLabel"></span>
    </div>
  </header>

  <div class="widget-area" id="widgetArea">
    <!-- Filters -->
    <div class="widget" id="widget-filters">
      <div class="widget-header">Filters <button class="widget-help-btn" data-widget="widget-filters" title="Help">?</button></div>
      <div class="widget-body">
        <div class="widget-filters" id="widgetFilters">
          <!-- Row 1: Band and Mode (multi-select buttons) -->
          <div class="filter-row">
            <div class="band-filters" id="bandFilters"></div>
            <div class="mode-filters" id="modeFilters"></div>
          </div>
          <!-- Row 2: Distance and Age -->
          <div class="filter-row filter-row-range">
            <div class="distance-filter" id="distanceFilterWrap">
              <label class="filter-label">Dist:</label>
              <input type="number" id="distanceFilter" min="0" step="50" placeholder="Max">
              <select id="distanceUnit"><option value="mi">mi</option><option value="km">km</option></select>
            </div>
            <div class="age-filter" id="ageFilterWrap">
              <label class="filter-label">Age:</label>
              <select id="ageFilter">
                <option value="">All</option>
                <option value="15">15 min</option>
                <option value="30">30 min</option>
                <option value="60">1 hr</option>
                <option value="120">2 hr</option>
              </select>
            </div>
            <div class="prop-filter" id="propFilterWrap">
              <button id="propFilterBtn" class="prop-filter-btn" title="Filter by propagation prediction (Fair or better)">Prop</button>
            </div>
          </div>
          <!-- Row 3: Existing dropdowns -->
          <div class="filter-row">
            <select id="countryFilter"><option value="">All Countries</option></select>
            <select id="stateFilter"><option value="">All States</option></select>
            <select id="gridFilter"><option value="">All Grids</option></select>
            <select id="continentFilter"><option value="">All Continents</option></select>
            <label class="priv-filter-label" title="Only show spots within your US license privileges"><input type="checkbox" id="privFilter"> My privileges</label>
          </div>
          <!-- Row 4: Presets -->
          <div class="filter-row filter-row-presets" id="presetFilterWrap">
            <select id="presetFilter"><option value="">Load Preset...</option></select>
            <button id="savePresetBtn">Save</button>
            <button id="deletePresetBtn">Del</button>
            <button id="clearFiltersBtn">Clear All</button>
          </div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Activations -->
    <div class="widget" id="widget-activations">
      <div class="widget-header">On the Air <span id="spotCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-activations" title="Help">?</button>
        <button class="widget-cfg-btn" id="spotColCfgBtn" title="Configure columns">&#9881;</button>
      </div>
      <div class="widget-body">
        <div class="source-tabs" id="sourceTabs">
          <button class="source-tab active" data-source="pota">POTA</button>
          <button class="source-tab" data-source="sota">SOTA</button>
          <button class="source-tab" data-source="dxc">DXC</button>
          <button class="source-tab" data-source="psk">PSK</button>
        </div>
        <div class="table-wrap">
          <table id="spotsTable">
            <thead id="spotsHead">
              <tr>
                <th>Callsign</th>
                <th>Freq</th>
                <th>Mode</th>
                <th>Ref</th>
                <th>Name</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody id="spotsBody"></tbody>
          </table>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Map -->
    <div class="widget" id="widget-map">
      <div class="widget-header">HamMap
        <button class="widget-help-btn" data-widget="widget-map" title="Help">?</button>
        <button class="widget-cfg-btn" id="mapOverlayCfgBtn" title="Map overlays">&#9881;</button>
        <div class="prop-controls">
          <button class="prop-metric-btn" data-metric="off">Prop Off</button>
          <button class="prop-metric-btn active" data-metric="mufd">MUF</button>
          <button class="prop-metric-btn" data-metric="fof2">foF2</button>
        </div>
        <div class="map-center-controls">
          <button class="map-center-btn active" data-center="qth">QTH</button>
          <button class="map-center-btn" data-center="pm">PM</button>
          <button class="map-center-btn" data-center="spot">DX</button>
        </div>
      </div>
      <div class="widget-body">
        <div id="map"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Solar -->
    <div class="widget" id="widget-solar">
      <div class="widget-header">Solar <button class="widget-help-btn" data-widget="widget-solar" title="Help">?</button><button class="widget-cfg-btn" id="solarCfgBtn" title="Configure fields">&#9881;</button></div>
      <div class="widget-body">
        <div class="solar-image-container">
          <select id="solarImageType">
            <option value="0193">Coronal Holes</option>
            <option value="0171">Coronal Loops</option>
            <option value="0304">Flares &amp; Prominences</option>
            <option value="HMIIC">Sunspots</option>
          </select>
          <div class="solar-canvas-wrap">
            <canvas id="solarCanvas" width="200" height="200"></canvas>
            <button class="solar-play-btn" id="solarPlayBtn" title="Play/Pause">&#9654;</button>
          </div>
        </div>
        <div class="solar-indices" id="solarIndices"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Space Weather History -->
    <div class="widget" id="widget-spacewx">
      <div class="widget-header">
        Space Wx
        <button class="widget-help-btn" data-widget="widget-spacewx" title="Help">?</button>
        <div class="spacewx-tabs">
          <button class="spacewx-tab active" data-tab="kp">Kp</button>
          <button class="spacewx-tab" data-tab="xray">X-Ray</button>
          <button class="spacewx-tab" data-tab="sfi">SFI</button>
          <button class="spacewx-tab" data-tab="wind">Wind</button>
          <button class="spacewx-tab" data-tab="bz">Bz</button>
        </div>
      </div>
      <div class="widget-body">
        <canvas id="spacewxCanvas"></canvas>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Band Conditions / Propagation -->
    <div class="widget" id="widget-propagation">
      <div class="widget-header">
        Band Conditions
        <button class="widget-help-btn" data-widget="widget-propagation" title="Help">?</button>
        <div class="day-night-toggle">
          <button class="toggle-btn" id="dayToggle" data-time="day">Day</button>
          <button class="toggle-btn" id="nightToggle" data-time="night">Night</button>
        </div>
      </div>
      <div class="widget-body">
        <div class="prop-summary">
          <div class="prop-summary-item">
            <span class="prop-summary-label">MUF</span>
            <span class="prop-summary-value" id="propMufValue">--</span>
          </div>
          <div class="prop-summary-item">
            <span class="prop-summary-label">SFI</span>
            <span class="prop-summary-value" id="propSfiValue">--</span>
          </div>
          <div class="prop-summary-item">
            <span class="prop-summary-label">K-index</span>
            <span class="prop-summary-value" id="propKindexValue">--</span>
          </div>
        </div>
        <div class="band-conditions-grid" id="bandConditionsGrid"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- VOACAP DEâ†’DX (24-hour matrix) -->
    <div class="widget" id="widget-voacap">
      <div class="widget-header">VOACAP DE&#x2192;DX
        <button class="widget-help-btn" data-widget="widget-voacap" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="voacap-matrix" id="voacapMatrix">
          <div class="voacap-no-data">Waiting for solar data...</div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Live Spots -->
    <div class="widget" id="widget-live-spots">
      <div class="widget-header">Live Spots
        <span id="liveSpotsCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-live-spots" title="Help">?</button>
        <button class="widget-cfg-btn" id="liveSpotsCfgBtn" title="Configure display">&#9881;</button>
      </div>
      <div class="widget-body">
        <div class="live-spots-status" id="liveSpotsStatus"></div>
        <div class="live-spots-summary" id="liveSpotsSummary"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Lunar / EME -->
    <div class="widget" id="widget-lunar">
      <div class="widget-header">Lunar / EME <button class="widget-help-btn" data-widget="widget-lunar" title="Help">?</button><button class="widget-cfg-btn" id="lunarCfgBtn" title="Configure fields">&#9881;</button></div>
      <div class="widget-body">
        <canvas id="moonCanvas" width="160" height="160"></canvas>
        <div class="lunar-cards" id="lunarCards"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Satellites -->
    <div class="widget" id="widget-satellites">
      <div class="widget-header">Satellites
        <button class="widget-help-btn" data-widget="widget-satellites" title="Help">?</button>
        <button class="widget-cfg-btn" id="satCfgBtn" title="Configure satellites">&#9881;</button>
      </div>
      <div class="widget-body">
        <div class="sat-list" id="satList"></div>
        <div class="sat-passes" id="satPasses"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Reference -->
    <div class="widget" id="widget-rst">
      <div class="widget-header">Reference <button class="widget-help-btn" data-widget="widget-rst" title="Help">?</button></div>
      <div class="widget-body rst-body">
        <div class="reference-tabs" id="referenceTabs">
          <button class="reference-tab active" data-ref-tab="rst">RST</button>
          <button class="reference-tab" data-ref-tab="phonetic">Phonetic</button>
          <button class="reference-tab" data-ref-tab="morse">Morse</button>
          <button class="reference-tab" data-ref-tab="qcodes">Q-Codes</button>
          <button class="reference-tab" data-ref-tab="bands">Bands</button>
        </div>
        <div id="referenceContent"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Spot Detail -->
    <div class="widget" id="widget-spot-detail">
      <div class="widget-header">DX Detail <button class="widget-help-btn" data-widget="widget-spot-detail" title="Help">?</button></div>
      <div class="widget-body" id="spotDetailBody">
        <div class="spot-detail-empty">Select a DX</div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Contests -->
    <div class="widget" id="widget-contests">
      <div class="widget-header">Contests
        <span id="contestCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-contests" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="contest-list" id="contestList"></div>
        <div class="contest-attribution">
          Data: <a href="https://www.contestcalendar.com/" target="_blank" rel="noopener">WA7BNM Contest Calendar</a>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- DXpeditions -->
    <div class="widget" id="widget-dxpeditions">
      <div class="widget-header">DXpeditions
        <span id="dxpeditionCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-dxpeditions" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="dxped-list" id="dxpedList"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- NCDXF Beacons -->
    <div class="widget" id="widget-beacons">
      <div class="widget-header">NCDXF Beacons
        <button class="widget-help-btn" data-widget="widget-beacons" title="Help">?</button>
      </div>
      <div class="widget-body">
        <table class="beacon-table" id="beaconTable">
          <thead><tr><th>MHz</th><th>Beacon</th><th>Location</th><th></th></tr></thead>
          <tbody id="beaconTbody"></tbody>
        </table>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- DE/DX Info -->
    <div class="widget" id="widget-dedx">
      <div class="widget-header">DE / DX Info
        <button class="widget-help-btn" data-widget="widget-dedx" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="dedx-container" id="dedxContainer">
          <div class="dedx-panel dedx-de">
            <div class="dedx-title">DE</div>
            <div class="dedx-content" id="dedxDeContent"></div>
          </div>
          <div class="dedx-panel dedx-dx">
            <div class="dedx-title">DX</div>
            <div class="dedx-content" id="dedxDxContent"></div>
          </div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>
  </div>

  <!-- Map overlay config overlay -->
  <div class="splash-overlay hidden" id="mapOverlayCfgSplash">
    <div class="splash-box map-overlay-cfg-box">
      <h2>Map Overlays</h2>
      <div class="splash-widget-list" id="mapOverlayFieldList">
        <label><input type="checkbox" id="mapOvLatLon" /> Lat/Lon Grid</label>
        <label><input type="checkbox" id="mapOvMaidenhead" /> Grid Squares (Maidenhead)</label>
        <label><input type="checkbox" id="mapOvTimezone" /> Timezone Lines</label>
      </div>
      <button id="mapOverlayCfgOk">OK</button>
    </div>
  </div>

  <!-- Live Spots config overlay -->
  <div class="splash-overlay hidden" id="liveSpotsCfgSplash">
    <div class="splash-box live-spots-cfg-box">
      <h2>Live Spots Settings</h2>
      <div class="live-spots-cfg-field">
        <label for="liveSpotsModeSelect">Display Mode</label>
        <select id="liveSpotsModeSelect">
          <option value="count">Spot Count</option>
          <option value="distance">Farthest Distance</option>
        </select>
      </div>
      <p class="live-spots-cfg-note">Requires your callsign to be set in Config. Shows where your signal was received in the last hour via PSKReporter.</p>
      <button id="liveSpotsCfgOk">OK</button>
    </div>
  </div>

  <!-- Satellite config overlay -->
  <div class="splash-overlay hidden" id="satCfgSplash">
    <div class="splash-box sat-cfg-box">
      <h2>Satellite Tracking</h2>
      <label for="satApiKey">N2YO API Key</label>
      <input type="text" id="satApiKey" placeholder="Get free key at n2yo.com/api" autocomplete="off" spellcheck="false" style="text-transform:none;" />
      <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:12px;text-align:left;">
        <a href="https://www.n2yo.com/api/" target="_blank" style="color:var(--accent);">Get a free API key (1000 req/hr)</a>
      </div>
      <div class="splash-loc-title" style="margin-bottom:8px;">Satellites to Track</div>
      <div class="sat-select-list" id="satSelectList"></div>
      <button id="satCfgOk">OK</button>
    </div>
  </div>

  <!-- Weather alert popup -->
  <div class="splash-overlay hidden wx-alert-splash" id="wxAlertSplash">
    <div class="splash-box">
      <h2>Weather Alerts</h2>
      <div class="wx-alert-list" id="wxAlertList"></div>
      <button id="wxAlertClose">Close</button>
    </div>
  </div>

  <!-- Help modal -->
  <div class="splash-overlay hidden" id="helpSplash">
    <div class="splash-box help-box">
      <h2 id="helpTitle"></h2>
      <div id="helpContent"></div>
      <button id="helpOk">Close</button>
    </div>
  </div>

  <!-- Feedback modal -->
  <div class="splash-overlay hidden" id="feedbackSplash">
    <div class="splash-box feedback-box">
      <h2>Send Feedback</h2>
      <p class="feedback-description">Help us improve HamTab! Your feedback is valuable to us.</p>
      <form id="feedbackForm">
        <div class="feedback-field">
          <label for="feedbackName">Name (optional)</label>
          <input type="text" id="feedbackName" name="name" placeholder="Your name or callsign" autocomplete="name" spellcheck="false" />
        </div>
        <div class="feedback-field">
          <label for="feedbackEmail">Email (optional)</label>
          <input type="email" id="feedbackEmail" name="email" placeholder="your@email.com (for follow-up)" autocomplete="email" spellcheck="false" />
          <p class="feedback-privacy-notice">
            ðŸ”’ Privacy: Your email is encrypted in your browser before being sent. Only the developers can decrypt it.
            Feedback is stored as a GitHub issue. By submitting, you consent to this processing. You may request deletion anytime.
          </p>
        </div>
        <!-- Honeypot field (hidden from users, catches bots) -->
        <input type="text" name="website" id="feedbackWebsite" style="position:absolute;left:-9999px;width:1px;height:1px;" tabindex="-1" autocomplete="off" />
        <div class="feedback-field">
          <label for="feedbackMessage">Feedback <span class="required">*</span></label>
          <textarea id="feedbackMessage" name="feedback" required minlength="10" maxlength="5000" rows="6" placeholder="Share your thoughts, report bugs, or suggest features..." spellcheck="true"></textarea>
          <div class="feedback-char-count"><span id="feedbackCharCount">0</span> / 5000</div>
        </div>
        <div class="feedback-status hidden" id="feedbackStatus"></div>
        <div class="feedback-buttons">
          <button type="button" id="feedbackCancel">Cancel</button>
          <button type="submit" id="feedbackSubmit">Send Feedback</button>
        </div>
      </form>
    </div>
  </div>

  <script src="vendor/leaflet.js"></script>
  <script src="vendor/leaflet.markercluster.js"></script>
  <script src="app.js"></script>
</body>
</html>
