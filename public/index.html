<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <title>HamTab - Amateur Radio Dashboard | POTA, SOTA, DX Spots & Propagation</title>
  <meta name="description" content="Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting. Real-time propagation, satellite tracking, space weather, and more. Free alternative to HamClock.">
  <meta name="keywords" content="amateur radio, ham radio, POTA, SOTA, DX cluster, propagation, HamClock, satellite tracking, space weather, ham radio dashboard">
  <meta name="author" content="Steven C Heist (KJ5MMO), Francisco J Peebles (KG5DPV)">
  <meta name="theme-color" content="#1a1a1a">

  <!-- Open Graph Meta Tags (Facebook, Discord, LinkedIn) -->
  <meta property="og:title" content="HamTab - Amateur Radio Dashboard">
  <meta property="og:description" content="Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting. Real-time propagation, satellite tracking, and space weather.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://hamtab.net">
  <meta property="og:image" content="https://hamtab.net/og-image.png">
  <meta property="og:site_name" content="HamTab">

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="HamTab - Amateur Radio Dashboard">
  <meta name="twitter:description" content="Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting.">
  <meta name="twitter:image" content="https://hamtab.net/og-image.png">

  <!-- Favicon & App Icons -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://hamtab.net">

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "HamTab",
    "applicationCategory": "WebApplication",
    "operatingSystem": "Any (Web Browser)",
    "description": "Modern web-based amateur radio dashboard for POTA, SOTA, and DX spotting with real-time propagation, satellite tracking, and space weather monitoring. Free alternative to HamClock.",
    "url": "https://hamtab.net",
    "author": [
      {
        "@type": "Person",
        "name": "Steven C Heist",
        "additionalName": "KJ5MMO"
      },
      {
        "@type": "Person",
        "name": "Francisco J Peebles",
        "additionalName": "KG5DPV"
      }
    ],
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "Real-time POTA spot tracking",
      "SOTA activations monitoring",
      "DX cluster integration",
      "PSKReporter integration",
      "Space weather and solar conditions",
      "Satellite tracking",
      "Interactive world map with gray line",
      "Weather alerts and conditions",
      "Propagation modeling"
    ]
  }
  </script>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="vendor/leaflet.css" />
  <link rel="stylesheet" href="vendor/MarkerCluster.css" />
  <link rel="stylesheet" href="vendor/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- SEO Content (hidden from normal users, visible to search engines and no-JS users) -->
  <noscript>
    <div style="padding: 2rem; max-width: 800px; margin: 0 auto; font-family: system-ui, -apple-system, sans-serif; line-height: 1.6;">
      <h1>HamTab - Modern Amateur Radio Dashboard</h1>
      <p style="font-size: 1.2rem; color: #666;">HamTab is a free, open-source amateur radio dashboard designed as a modern alternative to HamClock. Track POTA and SOTA activations, monitor DX clusters, view real-time propagation conditions, and track satellites—all in your web browser.</p>

      <h2>Features</h2>
      <ul style="column-count: 2; column-gap: 2rem;">
        <li>Real-time POTA (Parks on the Air) spot tracking</li>
        <li>SOTA (Summits on the Air) activations</li>
        <li>DX cluster integration</li>
        <li>PSKReporter integration</li>
        <li>Space weather and solar conditions</li>
        <li>Satellite tracking with N2YO integration</li>
        <li>Interactive world map with gray line</li>
        <li>Weather alerts and conditions (NWS, Weather Underground)</li>
        <li>Propagation modeling and ionosonde data</li>
        <li>Multi-source filtering and watch lists</li>
        <li>Configurable widgets with drag-and-drop</li>
        <li>Dark theme optimized for ham shack use</li>
      </ul>

      <h2>Deployment Options</h2>
      <p>HamTab supports two deployment modes:</p>
      <ul>
        <li><strong>Self-Hosted (Lanmode):</strong> Run on Windows, Linux, or Raspberry Pi with full local control</li>
        <li><strong>Cloud-Hosted (Hostedmode):</strong> Access via hamtab.net with no installation required</li>
      </ul>

      <h2>HamClock Alternative</h2>
      <p>With HamClock installations ceasing to function in June 2026, HamTab provides a modern, actively maintained alternative for the ~10,000+ HamClock users. Built with a stateless architecture and publicly available APIs, HamTab will continue functioning indefinitely.</p>

      <div style="margin-top: 2rem; padding: 1rem; background: #f0f0f0; border-radius: 8px;">
        <p style="margin: 0; color: #c00;"><strong>JavaScript Required:</strong> Please enable JavaScript in your browser to use HamTab.</p>
      </div>
    </div>
  </noscript>

  <!-- Splash screen -->
  <div class="splash-overlay" id="splash">
    <div class="splash-box config-box">
      <h2>HamTab Configuration</h2>

      <div class="config-tabs">
        <button type="button" class="config-tab active" data-tab="station">Station</button>
        <button type="button" class="config-tab" data-tab="radio" style="display:none">Radio</button><!-- RADIO_HIDDEN -->
        <button type="button" class="config-tab" data-tab="display">Display</button>
        <button type="button" class="config-tab" data-tab="appearance">Appearance</button>
        <button type="button" class="config-tab" data-tab="services">Services</button>
        <button type="button" class="config-tab" data-tab="data">Data</button>
        <button type="button" class="config-tab" data-tab="about">About</button>
        <button type="button" class="config-tab" data-tab="thanks">Thanks</button>
      </div>

      <div class="config-panels">
        <!-- Tab 1: Station -->
        <div class="config-panel active" data-panel="station">
          <label for="splashCallsign">Your Callsign</label>
          <input type="text" id="splashCallsign" placeholder="e.g. W1AW" autocomplete="off" spellcheck="false" />

          <div class="splash-divider"></div>

          <div class="splash-loc-header">
            <span class="splash-loc-title">Location Override</span>
            <div class="splash-loc-btns">
              <button type="button" class="splash-gps-btn" id="splashCallsignLocBtn">Use Callsign</button>
              <button type="button" class="splash-gps-btn" id="splashGpsBtn">Use GPS</button>
            </div>
          </div>

          <div class="splash-loc-fields">
            <div class="splash-loc-row">
              <div class="splash-field">
                <label for="splashLat">Lat</label>
                <input type="text" id="splashLat" placeholder="e.g. 41.71" autocomplete="off" spellcheck="false" />
              </div>
              <div class="splash-field">
                <label for="splashLon">Lon</label>
                <input type="text" id="splashLon" placeholder="e.g. -72.73" autocomplete="off" spellcheck="false" />
              </div>
            </div>
          </div>

          <div class="splash-grid-wrap">
            <label for="splashGrid">Grid Square</label>
            <input type="text" id="splashGrid" placeholder="e.g. FN31" autocomplete="off" spellcheck="false" />
            <div class="splash-grid-dropdown" id="splashGridDropdown"></div>
          </div>

          <div class="splash-loc-status" id="splashLocStatus"></div>

          <div class="splash-divider"></div>
          <div class="splash-time-format">
            <span class="splash-loc-title">Time Format</span>
            <div class="splash-time-options">
              <label><input type="radio" name="timeFormat" value="12" id="timeFmt12"> 12-hour</label>
              <label><input type="radio" name="timeFormat" value="24" id="timeFmt24"> 24-hour</label>
            </div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-units-section">
            <span class="splash-loc-title">Units</span>
            <div class="splash-units-row">
              <span class="splash-units-label">Distance:</span>
              <div class="splash-units-options">
                <label><input type="radio" name="distanceUnit" value="mi" id="distUnitMi"> mi</label>
                <label><input type="radio" name="distanceUnit" value="km" id="distUnitKm"> km</label>
              </div>
            </div>
            <div class="splash-units-row">
              <span class="splash-units-label">Temperature:</span>
              <div class="splash-units-options">
                <label><input type="radio" name="tempUnit" value="F" id="tempUnitF"> °F</label>
                <label><input type="radio" name="tempUnit" value="C" id="tempUnitC"> °C</label>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab: Radio --><!-- RADIO_HIDDEN -->
        <div class="config-panel" data-panel="radio" style="display:none">
          <!-- Connection Mode -->
          <div class="radio-cfg-section">
            <span class="splash-loc-title">Connection Mode</span>
            <div class="radio-cfg-row">
              <label><input type="radio" name="radioConnType" value="real" id="radioConnReal"> Real Radio</label>
              <label><input type="radio" name="radioConnType" value="demo" id="radioConnDemo"> Demo Mode</label>
            </div>
          </div>

          <div class="splash-divider"></div>

          <!-- Protocol + Model (real radio only) -->
          <div class="radio-cfg-section" id="radioProtocolSection">
            <span class="splash-loc-title">Protocol &amp; Radio</span>
            <div class="radio-cfg-row">
              <label for="radioProtocolFamily">Protocol Family</label>
              <select id="radioProtocolFamily" class="radio-cfg-select">
                <option value="auto">Auto-Detect</option>
                <option value="yaesu_ascii">Yaesu ASCII</option>
                <option value="kenwood_ascii">Kenwood ASCII</option>
                <option value="icom_civ">Icom CI-V</option>
                <option value="elecraft_ascii">Elecraft ASCII</option>
              </select>
            </div>
            <div class="radio-cfg-row">
              <label for="radioModelPreset">Model Preset</label>
              <select id="radioModelPreset" class="radio-cfg-select">
                <option value="">(None &mdash; use protocol defaults)</option>
              </select>
            </div>
            <div style="font-size:0.65rem;color:var(--text-dim);margin-top:-4px;text-align:left;">Model preset fills serial settings. You can still override below.</div>
          </div>

          <div class="splash-divider"></div>

          <!-- Port Selection (real radio only) -->
          <div class="radio-cfg-section" id="radioPortSection">
            <span class="splash-loc-title">Serial Port</span>
            <div class="radio-cfg-row">
              <label for="radioPortMode">Port</label>
              <select id="radioPortMode" class="radio-cfg-select">
                <option value="auto">Auto (browser picker)</option>
                <option value="manual">Use authorized port</option>
              </select>
            </div>
            <div class="radio-cfg-row" id="radioPortListRow" style="display:none;">
              <label for="radioPortList">Authorized Ports</label>
              <select id="radioPortList" class="radio-cfg-select">
                <option value="">No authorized ports</option>
              </select>
              <button type="button" class="radio-cfg-refresh-btn" id="radioRefreshPorts" title="Refresh port list">&#x21bb;</button>
            </div>
            <div style="font-size:0.65rem;color:var(--text-dim);margin-top:-4px;text-align:left;">Auto mode shows the browser port picker on connect. Manual uses a previously authorized port.</div>
          </div>

          <div class="splash-divider"></div>

          <!-- Serial Settings (real radio only) -->
          <div class="radio-cfg-section" id="radioSerialSection">
            <span class="splash-loc-title">Serial Settings</span>
            <div class="radio-cfg-row">
              <label for="radioBaudRate">Baud Rate</label>
              <select id="radioBaudRate" class="radio-cfg-select">
                <option value="auto">Auto-Detect</option>
                <option value="4800">4800</option>
                <option value="9600">9600</option>
                <option value="19200">19200</option>
                <option value="38400">38400</option>
                <option value="57600">57600</option>
                <option value="115200">115200</option>
              </select>
            </div>
            <div class="radio-cfg-row">
              <label for="radioDataBits">Data Bits</label>
              <select id="radioDataBits" class="radio-cfg-select radio-cfg-narrow">
                <option value="7">7</option>
                <option value="8" selected>8</option>
              </select>
              <label for="radioStopBits">Stop Bits</label>
              <select id="radioStopBits" class="radio-cfg-select radio-cfg-narrow">
                <option value="1" selected>1</option>
                <option value="2">2</option>
              </select>
            </div>
            <div class="radio-cfg-row">
              <label for="radioParity">Parity</label>
              <select id="radioParity" class="radio-cfg-select radio-cfg-narrow">
                <option value="none" selected>None</option>
                <option value="even">Even</option>
                <option value="odd">Odd</option>
              </select>
              <label for="radioFlowControl">Flow Ctrl</label>
              <select id="radioFlowControl" class="radio-cfg-select radio-cfg-narrow">
                <option value="none" selected>None</option>
                <option value="hardware">RTS/CTS</option>
              </select>
            </div>
          </div>

          <div class="splash-divider"></div>

          <!-- Control Settings (real radio only) -->
          <div class="radio-cfg-section" id="radioControlSection">
            <span class="splash-loc-title">Control</span>
            <div class="radio-cfg-row">
              <label for="radioPttMethod">PTT Method</label>
              <select id="radioPttMethod" class="radio-cfg-select">
                <option value="cat">CAT (serial command)</option>
                <option value="dtr">DTR line</option>
                <option value="rts">RTS line</option>
                <option value="none">None (manual)</option>
              </select>
            </div>
            <div class="radio-cfg-row">
              <label for="radioPollingInterval">Polling (ms)</label>
              <input type="number" id="radioPollingInterval" class="radio-cfg-number" min="100" max="5000" step="100" value="500">
            </div>
            <div class="radio-cfg-row" id="radioCivRow">
              <label for="radioCivAddress">CI-V Address</label>
              <input type="text" id="radioCivAddress" class="radio-cfg-text" placeholder="0x94" maxlength="4">
            </div>
          </div>

          <div class="splash-divider"></div>

          <!-- Safety (real radio only) -->
          <div class="radio-cfg-section" id="radioSafetySection">
            <span class="splash-loc-title">Safety</span>
            <label class="config-toggle"><input type="checkbox" id="radioSafetyTxIntent" checked> TX Intent Guard (locks TX during rapid tuning)</label>
            <label class="config-toggle"><input type="checkbox" id="radioSafetyBandLockout" checked> Band Transition Lockout (locks TX on band change)</label>
            <label class="config-toggle"><input type="checkbox" id="radioSafetyAutoPower" checked> Auto Power Reduction (reduces power on high SWR)</label>
            <div class="radio-cfg-row">
              <label for="radioSwrLimit">SWR Limit</label>
              <input type="number" id="radioSwrLimit" class="radio-cfg-number" min="1.5" max="10" step="0.1" value="3.0">
            </div>
            <div class="radio-cfg-row">
              <label for="radioSafePower">Safe Power (W)</label>
              <input type="number" id="radioSafePower" class="radio-cfg-number" min="5" max="100" step="5" value="20">
            </div>
          </div>

          <div class="splash-divider"></div>

          <!-- Demo Settings (demo mode only) -->
          <div class="radio-cfg-section" id="radioDemoSection">
            <span class="splash-loc-title">Demo Settings</span>
            <div class="radio-cfg-row">
              <span class="radio-cfg-sublabel">Propagation Simulation</span>
            </div>
            <div class="radio-cfg-row">
              <label><input type="radio" name="radioDemoProp" value="off" id="radioPropOff"> Off</label>
              <label><input type="radio" name="radioDemoProp" value="basic" id="radioPropBasic"> Basic</label>
              <label><input type="radio" name="radioDemoProp" value="location" id="radioPropLocation"> Location-Aware</label>
            </div>
          </div>
        </div>

        <!-- Tab 2: Display -->
        <div class="config-panel" data-panel="display">
          <div class="splash-widgets-section">
            <span class="splash-loc-title">Widgets</span>
            <span class="widget-slot-counter" id="widgetSlotCounter"></span>
            <div class="splash-widget-list" id="splashWidgetList"></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-grid-mode-section" id="gridModeSection">
            <span class="splash-loc-title">Layout Mode</span>
            <div class="splash-layout-mode-toggle">
              <label><input type="radio" name="layoutMode" value="float" id="layoutModeFloat"> Free Float</label>
              <label><input type="radio" name="layoutMode" value="grid" id="layoutModeGrid"> Grid</label>
            </div>
            <div class="splash-float-options" id="floatOptions">
              <label><input type="checkbox" id="snapToGridCheck" checked> Snap to grid</label>
              <label><input type="checkbox" id="allowOverlapCheck"> Allow overlapping</label>
            </div>
            <div class="splash-grid-perm-section" id="gridPermSection" style="display:none;">
              <label for="gridPermSelect">Grid Layout</label>
              <select id="gridPermSelect"></select>
              <div class="grid-perm-preview" id="gridPermPreview"></div>
              <div class="grid-assign-picker" id="gridAssignPicker"></div>
              <button type="button" class="splash-reset-grid-btn" id="resetGridBtn">Reset Grid</button>
            </div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-autorefresh-section">
            <label class="config-toggle">
              <input type="checkbox" id="cfgAutoRefresh" checked />
              Auto-refresh spots (every 60s)
            </label>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-layout-section">
            <span class="splash-loc-title">Layout Profiles</span>
            <div class="splash-layout-list" id="splashLayoutList"></div>
            <div class="splash-layout-save-row" id="splashLayoutSaveRow">
              <input type="text" id="splashLayoutName" placeholder="Layout name" maxlength="40" />
              <button type="button" class="splash-layout-btn" id="splashSaveLayout">Save</button>
            </div>
            <div class="splash-layout-actions">
              <button type="button" class="splash-layout-btn" id="splashClearLayout">Reset to Default</button>
            </div>
            <div class="splash-layout-status" id="splashLayoutStatus"></div>
          </div>
        </div>

        <!-- Tab 3: Appearance -->
        <div class="config-panel" data-panel="appearance">
          <div class="splash-theme-section">
            <span class="splash-loc-title">Theme</span>
            <div class="theme-selector" id="themeSelector"></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-header-section">
            <span class="splash-loc-title">Header</span>
            <label class="config-toggle">
              <input type="checkbox" id="cfgSlimHeader" />
              Compact header (hides weather &amp; name, shrinks clocks)
            </label>
            <label class="config-toggle">
              <input type="checkbox" id="cfgGrayscale" />
              Grayscale mode (desaturates all colors for e-ink or reduced distraction)
            </label>
            <label class="config-toggle">
              <input type="checkbox" id="cfgDisableWxBg" />
              Disable weather backgrounds (removes gradient overlays from local clock for better readability)
            </label>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-band-colors-section">
            <span class="splash-loc-title">Band Colors</span>
            <div id="bandColorPickers" class="band-color-grid"></div>
            <button type="button" id="bandColorResetBtn" class="band-color-reset">Reset to Defaults</button>
          </div>
        </div>

        <!-- Tab 4: Services -->
        <div class="config-panel" data-panel="services">
          <div class="splash-wx-section">
            <span class="splash-loc-title">Weather Station (optional)</span>
            <input type="text" id="splashWxStation" placeholder="e.g. KCTBRIDG45" autocomplete="off" spellcheck="false" style="text-transform:uppercase;margin-top:6px;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;">Weather Underground station ID</div>
            <label for="splashWxApiKey">WU API Key</label>
            <input type="text" id="splashWxApiKey" placeholder="Weather Underground API key" autocomplete="off" spellcheck="false" style="text-transform:none;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;"><a href="https://www.wunderground.com/member/api-keys" target="_blank" style="color:var(--accent);">Get a free API key</a></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-owm-section">
            <span class="splash-loc-title">OpenWeatherMap (optional)</span>
            <label for="splashOwmApiKey">OWM API Key</label>
            <input type="text" id="splashOwmApiKey" placeholder="OpenWeatherMap API key" autocomplete="off" spellcheck="false" style="text-transform:none;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;"><a href="https://home.openweathermap.org/api_keys" target="_blank" style="color:var(--accent);">Get a free API key (1000 req/day)</a></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-sat-section">
            <span class="splash-loc-title">Satellite Tracking (optional)</span>
            <label for="splashN2yoApiKey">N2YO API Key</label>
            <input type="text" id="splashN2yoApiKey" placeholder="N2YO API key for satellite tracking" autocomplete="off" spellcheck="false" style="text-transform:none;" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;"><a href="https://www.n2yo.com/api/" target="_blank" style="color:var(--accent);">Get a free API key (1000 req/hr)</a></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-hamqth-section">
            <span class="splash-loc-title">HamQTH Callsign Lookup (optional)</span>
            <label for="splashHamqthUser">Username</label>
            <input type="text" id="splashHamqthUser" placeholder="HamQTH username" autocomplete="off" spellcheck="false" style="text-transform:none;" />
            <label for="splashHamqthPass">Password</label>
            <input type="password" id="splashHamqthPass" placeholder="HamQTH password" autocomplete="off" />
            <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:8px;text-align:left;">Enables global callsign lookups for non-US stations. <a href="https://www.hamqth.com/register.php" target="_blank" style="color:var(--accent);">Register free at HamQTH.com</a></div>
          </div>

          <div class="splash-divider"></div>
          <div class="splash-update-section">
            <span class="splash-loc-title">Update Check Interval</span>
            <select id="splashUpdateInterval">
              <option value="60">60 seconds</option>
              <option value="900">15 minutes</option>
              <option value="3600">60 minutes</option>
              <option value="21600">6 hours</option>
              <option value="86400">24 hours</option>
            </select>
          </div>
        </div>

        <!-- Tab 5: About -->
        <div class="config-panel" data-panel="about">
          <div class="about-content">
            <h3>HamTab</h3>
            <p class="about-version">Version <span id="aboutVersion"></span></p>

            <h4>Developers</h4>
            <p>Steven C Heist (KJ5MMO)<br>Francisco J Peebles (KG5DPV)<br>Claude (Anthropic)<br>ChatGPT (OpenAI)<br>M365 Copilot (Microsoft)</p>

            <h4>Inspiration</h4>
            <p>HamTab is inspired by <a href="https://www.clearskyinstitute.com/ham/HamClock/" target="_blank" rel="noopener">HamClock</a> by Elwood Downey (WB0OEW). Thank you for creating such an invaluable tool for the amateur radio community.</p>

            <h4>Data Sources</h4>
            <ul class="about-links">
              <li><a href="https://pota.app" target="_blank" rel="noopener">POTA</a> — Parks on the Air</li>
              <li><a href="https://www.sota.org.uk" target="_blank" rel="noopener">SOTA</a> — Summits on the Air</li>
              <li><a href="https://pskreporter.info" target="_blank" rel="noopener">PSKReporter</a> — Live spots</li>
              <li><a href="https://www.n2yo.com" target="_blank" rel="noopener">N2YO</a> — Satellite tracking</li>
              <li><a href="https://www.voacap.com" target="_blank" rel="noopener">VOACAP</a> — HF propagation</li>
              <li><a href="https://www.hamqsl.com" target="_blank" rel="noopener">HamQSL</a> — Solar data</li>
              <li><a href="https://www.contestcalendar.com/" target="_blank" rel="noopener">WA7BNM</a> — Contest calendar</li>
              <li><a href="https://www.ng3k.com" target="_blank" rel="noopener">NG3K</a> — DXpeditions</li>
              <li><a href="https://www.ncdxf.org/beacon/" target="_blank" rel="noopener">NCDXF</a> — HF beacons</li>
              <li><a href="https://www.weather.gov" target="_blank" rel="noopener">NOAA/NWS</a> — Weather</li>
              <li><a href="https://sdo.gsfc.nasa.gov" target="_blank" rel="noopener">SDO</a> — Solar imagery</li>
            </ul>

            <h4>Open Source</h4>
            <p><a href="https://github.com/stevencheist/HamTabv1" target="_blank" rel="noopener">View on GitHub</a></p>
          </div>
        </div>

        <!-- Tab 6: Data -->
        <div class="config-panel" data-panel="data">
          <h3>Export / Import</h3>
          <p class="data-desc">Transfer your HamTab settings between browsers. Export produces a text code you can paste into another browser's import field.</p>

          <div class="data-actions">
            <button type="button" id="dataExportBtn" class="data-btn">Export Config</button>
            <button type="button" id="dataImportToggle" class="data-btn">Import Config</button>
          </div>

          <div id="dataExportSection" class="data-section hidden">
            <label for="dataExportCode">Config code (copy this):</label>
            <textarea id="dataExportCode" readonly rows="5" spellcheck="false"></textarea>
            <button type="button" id="dataExportCopy" class="data-btn-sm">Copy to Clipboard</button>
          </div>

          <div id="dataImportSection" class="data-section hidden">
            <label for="dataImportCode">Paste config code:</label>
            <textarea id="dataImportCode" rows="5" spellcheck="false" placeholder="Paste exported config code here..."></textarea>
            <button type="button" id="dataImportApply" class="data-btn-sm">Apply Import</button>
          </div>

          <div id="dataStatus" class="data-status"></div>

          <div class="splash-divider"></div>

          <div id="dataSyncSection" class="hidden">
            <h3>LAN Sync</h3>
            <p class="data-desc">Automatically keep settings in sync across all browsers on your local network.</p>
            <label class="data-toggle-label">
              <input type="checkbox" id="dataSyncToggle">
              <span>Sync across devices</span>
            </label>
            <div id="dataSyncStatus" class="data-sync-status"></div>
          </div>
        </div>

        <!-- Tab 7: Thanks -->
        <div class="config-panel" data-panel="thanks">
          <div class="about-content">
            <h3>Thank You</h3>
            <p>HamTab is built by hams, for hams. We'd like to thank the community members who have helped improve HamTab through bug reports, testing, and feedback.</p>
            <div id="thanksList">
              <h4>Community Contributors</h4>
              <ul class="about-links">
                <li><strong>Chris Anderson (KE9END)</strong> — Dedicated beta tester, bug reports, and feature feedback</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="splash-version">Version: <span id="splashVersion"></span></div>
      <button id="splashOk">OK</button>
    </div>
  </div>

  <!-- Solar field config overlay -->
  <div class="splash-overlay hidden" id="solarCfgSplash">
    <div class="splash-box solar-cfg-box">
      <h2>Solar &amp; Propagation Fields</h2>
      <div class="splash-widget-list" id="solarFieldList"></div>
      <button id="solarCfgOk">OK</button>
    </div>
  </div>

  <!-- Lunar field config overlay -->
  <div class="splash-overlay hidden" id="lunarCfgSplash">
    <div class="splash-box lunar-cfg-box">
      <h2>Lunar / EME Fields</h2>
      <div class="splash-widget-list" id="lunarFieldList"></div>
      <button id="lunarCfgOk">OK</button>
    </div>
  </div>

  <!-- Spot column config overlay -->
  <div class="splash-overlay hidden" id="spotColCfgSplash">
    <div class="splash-box spot-col-cfg-box">
      <h2>Table Columns</h2>
      <div class="splash-widget-list" id="spotColFieldList"></div>
      <button id="spotColCfgOk">OK</button>
    </div>
  </div>

  <header>
    <div class="header-left">
      <div class="op-info">
        <div class="op-call" id="opCall"></div>
        <div class="op-name" id="opName"></div>
        <div class="op-loc" id="opLoc">Location unknown</div>
      </div>
      <button class="op-btn" id="editCallBtn" title="Configuration">Config</button>
    </div>
    <div class="header-center">
      <div class="header-clock-group">
        <div class="wx-alert-badge hidden" id="wxAlertBadge">&#9888;</div>
        <div class="header-clock" id="headerClockLocal">
          <div class="header-clock-label">Local</div>
          <div class="header-clock-wx-icon" id="clockWxIcon"></div>
          <div class="header-clock-time" id="clockLocalTime"></div>
          <div class="header-clock-weather" id="clockLocalWeather"></div>
          <div class="wx-source-logo hidden" id="wxSourceLogo" title="Weather data source"></div>
        </div>
      </div>
      <div class="header-clock" id="headerClockUtc">
        <div class="header-clock-label">UTC</div>
        <div class="header-clock-time" id="clockUtcTime"></div>
      </div>
    </div>
    <button class="mobile-menu-btn" id="mobileMenuBtn" title="Menu">&#9776;</button>
    <div class="header-right">
      <div class="layout-dropdown" id="layoutDropdown">
        <button class="layout-btn" id="layoutBtn" title="Layout profiles">Layouts &#9662;</button>
        <div class="layout-menu" id="layoutMenu"></div>
      </div>
      <button id="refreshBtn" title="Click to refresh now">Refresh</button>
      <button id="fullscreenBtn" title="Toggle fullscreen">Fullscreen</button>
      <button id="feedbackBtn" class="feedback-btn" title="Send feedback">Feedback</button>
      <a href="https://buymeacoffee.com/stevencheist" target="_blank" rel="noopener" class="coffee-btn" title="Support HamTab development">&#9749; Coffee</a>
      <a href="https://discord.gg/Ru3ydQY75U" target="_blank" rel="noopener" class="discord-btn" title="Join the HamTab Discord community"><svg class="discord-icon" viewBox="0 0 127.14 96.36" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M107.7 8.07A105.15 105.15 0 0 0 81.47 0a72.06 72.06 0 0 0-3.36 6.83 97.68 97.68 0 0 0-29.11 0A72.37 72.37 0 0 0 45.64 0 105.89 105.89 0 0 0 19.39 8.09C2.79 32.65-1.71 56.6.54 80.21a105.73 105.73 0 0 0 32.17 16.15 77.7 77.7 0 0 0 6.89-11.11 68.42 68.42 0 0 1-10.85-5.18c.91-.66 1.8-1.34 2.66-2.03a75.57 75.57 0 0 0 64.32 0c.87.71 1.76 1.39 2.66 2.03a68.68 68.68 0 0 1-10.87 5.19 77.22 77.22 0 0 0 6.89 11.1 105.25 105.25 0 0 0 32.19-16.14c2.64-27.38-4.51-51.11-18.9-72.15ZM42.45 65.69C36.18 65.69 31 60 31 53.05s5-12.68 11.45-12.68S53.99 46 53.92 53.05c0 6.95-5.11 12.64-11.47 12.64Zm42.24 0C78.41 65.69 73.25 60 73.25 53.05s5-12.68 11.44-12.68S96.23 46 96.16 53.05c0 6.95-5.08 12.64-11.47 12.64Z"/></svg></a>
      <div class="update-indicator" id="updateIndicator" title="Update status">
        <span class="update-dot gray" id="updateDot"></span>
        <span class="update-label" id="updateLabel">Checking...</span>
        <button class="restart-btn hidden" id="restartBtn">Restart</button>
      </div>
    </div>
    <div class="mobile-menu-backdrop" id="mobileMenuBackdrop"></div>
    <nav class="mobile-menu-drawer" id="mobileMenuDrawer">
      <div class="mobile-menu-header">Menu</div>
      <button class="mobile-menu-item" data-action="layouts">Layouts</button>
      <button class="mobile-menu-item" data-action="config">Config</button>
      <button class="mobile-menu-item" data-action="refresh">Refresh</button>
      <button class="mobile-menu-item" data-action="feedback">Feedback</button>
      <a href="https://buymeacoffee.com/stevencheist" target="_blank" rel="noopener" class="mobile-menu-item">&#9749; Support</a>
      <a href="https://discord.gg/Ru3ydQY75U" target="_blank" rel="noopener" class="mobile-menu-item">Discord</a>
      <div class="mobile-menu-update" id="mobileMenuUpdate"></div>
    </nav>
  </header>

  <div class="widget-area" id="widgetArea">
    <!-- Filters -->
    <div class="widget" id="widget-filters">
      <div class="widget-header">Filters <button class="widget-help-btn" data-widget="widget-filters" title="Help">?</button></div>
      <div class="widget-body">
        <div class="widget-filters" id="widgetFilters">
          <!-- Row 1: Band and Mode (multi-select buttons) -->
          <div class="filter-row">
            <div class="band-filters" id="bandFilters"></div>
            <div class="mode-filters" id="modeFilters"></div>
          </div>
          <!-- Row 2: Distance and Age -->
          <div class="filter-row filter-row-range">
            <div class="distance-filter" id="distanceFilterWrap">
              <label class="filter-label">Dist:</label>
              <input type="number" id="distanceFilter" min="0" step="50" placeholder="Max">
              <select id="distanceUnit"><option value="mi">mi</option><option value="km">km</option></select>
            </div>
            <div class="age-filter" id="ageFilterWrap">
              <label class="filter-label">Age:</label>
              <select id="ageFilter">
                <option value="">All</option>
                <option value="15">15 min</option>
                <option value="30">30 min</option>
                <option value="60">1 hr</option>
                <option value="120">2 hr</option>
              </select>
            </div>
            <div class="prop-filter" id="propFilterWrap">
              <button id="propFilterBtn" class="prop-filter-btn" title="Filter by propagation prediction (Fair or better)">Prop</button>
            </div>
          </div>
          <!-- Row 3: Existing dropdowns -->
          <div class="filter-row">
            <select id="countryFilter"><option value="">All Countries</option></select>
            <select id="stateFilter"><option value="">All States</option></select>
            <select id="gridFilter"><option value="">All Grids</option></select>
            <select id="continentFilter"><option value="">All Continents</option></select>
            <label class="priv-filter-label" title="Only show spots within your US license privileges"><input type="checkbox" id="privFilter"> My privileges</label>
          </div>
          <!-- Row 4: Presets -->
          <div class="filter-row filter-row-presets" id="presetFilterWrap">
            <select id="presetFilter"><option value="">Load Preset...</option></select>
            <button id="savePresetBtn">Save</button>
            <button id="deletePresetBtn">Del</button>
            <button id="clearFiltersBtn">Clear All</button>
          </div>
          <!-- Row 5: Watch Lists accordion -->
          <div class="wl-accordion" id="wlAccordion">
            <button type="button" class="wl-accordion-toggle" id="wlAccordionToggle">Watch Lists <span class="wl-accordion-arrow">&#9654;</span></button>
            <div class="wl-accordion-body" id="wlAccordionBody">
              <div id="watchListEditor"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Activations -->
    <div class="widget" id="widget-activations">
      <div class="widget-header">On the Air <span id="spotCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-activations" title="Help">?</button>
        <button class="widget-cfg-btn" id="spotColCfgBtn" title="Configure columns">&#9881;</button>
      </div>
      <div class="widget-body">
        <div class="source-tabs" id="sourceTabs">
          <button class="source-tab active" data-source="pota">POTA</button>
          <button class="source-tab" data-source="sota">SOTA</button>
          <button class="source-tab" data-source="dxc">DXC</button>
          <button class="source-tab" data-source="wwff">WWFF</button>
          <button class="source-tab" data-source="psk">PSK</button>
        </div>
        <div class="table-wrap">
          <table id="spotsTable">
            <thead id="spotsHead">
              <tr>
                <th>Callsign</th>
                <th>Freq</th>
                <th>Mode</th>
                <th>Ref</th>
                <th>Name</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody id="spotsBody"></tbody>
          </table>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Map -->
    <div class="widget" id="widget-map">
      <div class="widget-header">HamMap
        <button class="widget-help-btn" data-widget="widget-map" title="Help">?</button>
        <button class="widget-cfg-btn" id="mapOverlayCfgBtn" title="Map overlays">&#9881;</button>
        <div class="prop-controls">
          <button class="prop-metric-btn" data-metric="off">Prop Off</button>
          <button class="prop-metric-btn active" data-metric="mufd">MUF</button>
          <button class="prop-metric-btn" data-metric="fof2">foF2</button>
        </div>
        <div class="map-center-controls">
          <button class="map-center-btn active" data-center="qth">QTH</button>
          <button class="map-center-btn" data-center="pm">PM</button>
          <button class="map-center-btn" data-center="spot">DX</button>
          <button class="map-center-btn" data-center="cty">CTY</button>
        </div>
      </div>
      <div class="widget-body">
        <div id="map"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Solar -->
    <div class="widget" id="widget-solar">
      <div class="widget-header">Solar <button class="widget-help-btn" data-widget="widget-solar" title="Help">?</button><button class="widget-cfg-btn" id="solarCfgBtn" title="Configure fields">&#9881;</button></div>
      <div class="widget-body">
        <div class="solar-image-container">
          <select id="solarImageType">
            <option value="0193">Coronal Holes</option>
            <option value="0171">Coronal Loops</option>
            <option value="0304">Flares &amp; Prominences</option>
            <option value="HMIIC">Sunspots</option>
          </select>
          <div class="solar-canvas-wrap">
            <canvas id="solarCanvas" width="200" height="200"></canvas>
            <button class="solar-play-btn" id="solarPlayBtn" title="Play/Pause">&#9654;</button>
          </div>
        </div>
        <div class="solar-indices" id="solarIndices"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Space Weather History -->
    <div class="widget" id="widget-spacewx">
      <div class="widget-header">
        Space Wx
        <button class="widget-help-btn" data-widget="widget-spacewx" title="Help">?</button>
        <div class="spacewx-tabs">
          <button class="spacewx-tab active" data-tab="kp">Kp</button>
          <button class="spacewx-tab" data-tab="xray">X-Ray</button>
          <button class="spacewx-tab" data-tab="sfi">SFI</button>
          <button class="spacewx-tab" data-tab="wind">Wind</button>
          <button class="spacewx-tab" data-tab="bz">Bz</button>
        </div>
      </div>
      <div class="widget-body">
        <canvas id="spacewxCanvas"></canvas>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Band Conditions / Propagation -->
    <div class="widget" id="widget-propagation">
      <div class="widget-header">
        Band Conditions
        <button class="widget-help-btn" data-widget="widget-propagation" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="prop-summary">
          <div class="prop-summary-item">
            <span class="prop-summary-label">MUF</span>
            <span class="prop-summary-value" id="propMufValue">--</span>
          </div>
          <div class="prop-summary-item">
            <span class="prop-summary-label">SFI</span>
            <span class="prop-summary-value" id="propSfiValue">--</span>
          </div>
          <div class="prop-summary-item">
            <span class="prop-summary-label">K-index</span>
            <span class="prop-summary-value" id="propKindexValue">--</span>
          </div>
        </div>
        <div class="band-tabs" id="bandTabs">
          <button class="band-tab active" data-band-tab="hf">HF Bands</button>
          <button class="band-tab" data-band-tab="vhf">VHF</button>
        </div>
        <div class="band-conditions-grid" id="bandConditionsGrid"></div>
        <div class="vhf-conditions" id="vhfConditions" style="display:none"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- VOACAP DE→DX (24-hour matrix) -->
    <div class="widget" id="widget-voacap">
      <div class="widget-header">VOACAP DE&#x2192;DX
        <button class="widget-help-btn" data-widget="widget-voacap" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="voacap-matrix" id="voacapMatrix">
          <div class="voacap-no-data">Waiting for solar data...</div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Live Spots -->
    <div class="widget" id="widget-live-spots">
      <div class="widget-header">Live Spots
        <span id="liveSpotsCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-live-spots" title="Help">?</button>
        <button class="widget-cfg-btn" id="liveSpotsCfgBtn" title="Configure display">&#9881;</button>
      </div>
      <div class="widget-body">
        <div class="live-spots-status" id="liveSpotsStatus"></div>
        <div class="live-spots-summary" id="liveSpotsSummary"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Lunar / EME -->
    <div class="widget" id="widget-lunar">
      <div class="widget-header">Lunar / EME <button class="widget-help-btn" data-widget="widget-lunar" title="Help">?</button><button class="widget-cfg-btn" id="lunarCfgBtn" title="Configure fields">&#9881;</button></div>
      <div class="widget-body">
        <canvas id="moonCanvas" width="160" height="160"></canvas>
        <div style="text-align:center;margin:-4px 0 4px;"><a href="https://svs.gsfc.nasa.gov/5187" target="_blank" rel="noopener" style="font-size:0.65rem;color:var(--text-dim);">NASA Moon Visualization</a></div>
        <div class="lunar-cards" id="lunarCards"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Satellites -->
    <div class="widget" id="widget-satellites">
      <div class="widget-header">Satellites
        <button class="widget-help-btn" data-widget="widget-satellites" title="Help">?</button>
        <button class="widget-cfg-btn" id="satCfgBtn" title="Configure satellites">&#9881;</button>
      </div>
      <div class="widget-body">
        <div class="sat-list" id="satList"></div>
        <div class="sat-passes" id="satPasses"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Reference -->
    <div class="widget" id="widget-rst">
      <div class="widget-header">Reference <button class="widget-help-btn" data-widget="widget-rst" title="Help">?</button></div>
      <div class="widget-body rst-body">
        <div class="reference-tabs" id="referenceTabs">
          <button class="reference-tab active" data-ref-tab="rst">RST</button>
          <button class="reference-tab" data-ref-tab="phonetic">Phonetic</button>
          <button class="reference-tab" data-ref-tab="morse">Morse</button>
          <button class="reference-tab" data-ref-tab="qcodes">Q-Codes</button>
          <button class="reference-tab" data-ref-tab="bands">Bands</button>
        </div>
        <div id="referenceContent"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Spot Detail -->
    <div class="widget" id="widget-spot-detail">
      <div class="widget-header">DX Detail <button class="widget-help-btn" data-widget="widget-spot-detail" title="Help">?</button></div>
      <div class="widget-body" id="spotDetailBody">
        <div class="spot-detail-empty">Select a DX</div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Contests -->
    <div class="widget" id="widget-contests">
      <div class="widget-header">Contests
        <span id="contestCount" class="spot-count"></span>
        <button class="widget-help-btn" data-widget="widget-contests" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="contest-list" id="contestList"></div>
        <div class="contest-attribution">
          Data: <a href="https://www.contestcalendar.com/" target="_blank" rel="noopener">WA7BNM Contest Calendar</a>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- DXpeditions -->
    <div class="widget" id="widget-dxpeditions">
      <div class="widget-header">DXpeditions
        <span id="dxpeditionCount" class="spot-count"></span>
        <select id="dxpedTimeFilter" class="widget-header-select" title="Time window filter">
          <option value="active">Active Now</option>
          <option value="7d">Within 1 Week</option>
          <option value="30d">Within 1 Month</option>
          <option value="180d">Within 6 Months</option>
          <option value="all">All</option>
        </select>
        <button class="widget-help-btn" data-widget="widget-dxpeditions" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="dxped-list" id="dxpedList"></div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- NCDXF Beacons -->
    <div class="widget" id="widget-beacons">
      <div class="widget-header">NCDXF Beacons
        <button class="widget-help-btn" data-widget="widget-beacons" title="Help">?</button>
      </div>
      <div class="widget-body">
        <table class="beacon-table" id="beaconTable">
          <thead><tr><th>MHz</th><th>Beacon</th><th>Location</th><th></th></tr></thead>
          <tbody id="beaconTbody"></tbody>
        </table>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- DE/DX Info -->
    <div class="widget" id="widget-dedx">
      <div class="widget-header">DE / DX Info
        <button class="widget-help-btn" data-widget="widget-dedx" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="dedx-container" id="dedxContainer">
          <div class="dedx-panel dedx-de">
            <div class="dedx-title">DE</div>
            <div class="dedx-clock" id="dedxDeTime">--:--:--</div>
            <div class="dedx-content" id="dedxDeContent"></div>
          </div>
          <div class="dedx-panel dedx-dx">
            <div class="dedx-title">DX</div>
            <div class="dedx-clock" id="dedxDxTime">--:--:--</div>
            <div class="dedx-content" id="dedxDxContent"></div>
          </div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>
  </div>

    <!-- Stopwatch / Timer -->
    <div class="widget" id="widget-stopwatch">
      <div class="widget-header">Stopwatch / Timer
        <button class="widget-help-btn" data-widget="widget-stopwatch" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="sw-container" id="swContainer">
          <div class="sw-mode-tabs">
            <button class="sw-tab active" id="swTabStopwatch">Stopwatch</button>
            <button class="sw-tab" id="swTabCountdown">Countdown</button>
          </div>
          <div class="sw-display" id="swDisplay">00:00.0</div>
          <div class="sw-controls">
            <button class="sw-btn sw-btn-start" id="swStart">Start</button>
            <button class="sw-btn sw-btn-stop" id="swStop">Stop</button>
            <button class="sw-btn sw-btn-reset" id="swReset">Reset</button>
            <button class="sw-btn sw-btn-lap" id="swLap">Lap</button>
          </div>
          <div class="sw-countdown-set hidden" id="swCountdownSet">
            <button class="sw-preset" data-minutes="10">10m ID</button>
            <button class="sw-preset" data-minutes="15">15m</button>
            <button class="sw-preset" data-minutes="30">30m</button>
            <button class="sw-preset" data-minutes="60">60m</button>
          </div>
          <div class="sw-laps" id="swLaps"></div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- Analog Clock -->
    <div class="widget" id="widget-analog-clock">
      <div class="widget-header">Analog Clock
        <button class="widget-help-btn" data-widget="widget-analog-clock" title="Help">?</button>
        <button class="widget-cfg-btn" id="clockCfgBtn" title="Configure clock face">&#9881;</button>
      </div>
      <div class="widget-body">
        <svg id="analogClockSvg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"></svg>
      </div>
      <div class="widget-resize"></div>
    </div>

    <!-- On-Air Rig Control --><!-- RADIO_HIDDEN -->
    <div class="widget" id="widget-on-air-rig" style="display:none">
      <div class="widget-header">On-Air Rig
        <button class="widget-help-btn" data-widget="widget-on-air-rig" title="Help">?</button>
      </div>
      <div class="widget-body">
        <div class="rig-container" id="rigContainer">
          <!-- LCD Display Panel -->
          <div class="rig-lcd" id="rigLcd">
            <div class="rig-lcd-top">
              <span class="rig-vfo-label">VFO A</span>
              <span class="rig-tx-state" id="rigTxState">RX</span>
            </div>
            <div class="rig-confidence" id="rigConfidence">
              <div class="rig-frequency" id="rigFrequency">-.---.---</div>
              <span class="rig-freq-unit">MHz</span>
            </div>
            <div class="rig-info-row">
              <span class="rig-band" id="rigBand"></span>
              <span class="rig-mode" id="rigMode">---</span>
              <span class="rig-rst hidden" id="rigRST"></span>
              <span class="rig-power hidden" id="rigPower"></span>
            </div>
          </div>
          <!-- S-Meter (LED bar-graph) -->
          <div class="rig-meter-row">
            <label>S</label>
            <div class="rig-meter-wrap">
              <div class="rig-meter-bar"><div class="rig-meter-fill" id="rigSMeter"></div></div>
              <div class="rig-meter-scale">
                <span>1</span><span>3</span><span>5</span><span>7</span><span>9</span><span class="rig-meter-over-label">+20</span><span class="rig-meter-over-label">+40</span>
              </div>
            </div>
            <span class="rig-swr-label" id="rigSWR">SWR ---</span>
          </div>
          <!-- Spectrum scope + waterfall (demo mode panadapter) -->
          <div class="rig-scope-section" id="rigScopeSection" style="display:none">
            <canvas class="rig-scope-spectrum" id="rigScopeSpectrum"></canvas>
            <canvas class="rig-scope-waterfall" id="rigScopeWaterfall"></canvas>
          </div>
          <!-- Band plan overlay -->
          <div class="rig-band-overlay" id="rigBandOverlay"></div>
          <!-- Band + Mode selectors (WIP — needs live radio testing)
          <div class="rig-band-mode-row hidden" id="rigBandModeRow">
            <select id="rigBandSelect" class="rig-band-select">
              <option value="">Band</option>
            </select>
            <select id="rigModeSelect" class="rig-mode-select">
              <option value="">Mode</option>
            </select>
          </div>
          -->
          <!-- Power slider -->
          <div class="rig-power-row hidden" id="rigPowerRow">
            <label>PWR</label>
            <input type="range" class="rig-power-slider" id="rigPowerSlider" min="5" max="100" step="5" value="100">
            <span class="rig-power-value" id="rigPowerValue">100W</span>
          </div>
          <!-- Controls -->
          <div class="rig-connect-row">
            <select id="rigProfileSelect" class="rig-profile-select">
              <option value="">Select Radio...</option>
            </select>
            <button id="rigConnectBtn" class="rig-connect-btn">Connect</button>
          </div>
          <div class="rig-status" id="rigStatus"></div>
        </div>
      </div>
      <div class="widget-resize"></div>
    </div>
  </div>

  <!-- Mobile tab bar (populated dynamically by tabs.js) -->
  <nav class="tab-bar" id="tabBar"></nav>

  <!-- Map overlay config overlay -->
  <div class="splash-overlay hidden" id="mapOverlayCfgSplash">
    <div class="splash-box map-overlay-cfg-box">
      <h2>Map Overlays</h2>
      <div class="splash-widget-list" id="mapOverlayFieldList">
        <label><input type="checkbox" id="mapOvLatLon" /> Lat/Lon Grid</label>
        <label><input type="checkbox" id="mapOvMaidenhead" /> Grid Squares (Maidenhead)</label>
        <label><input type="checkbox" id="mapOvTimezone" /> Timezone Lines</label>
        <label><input type="checkbox" id="mapOvMufImage" /> MUF Map (prop.kc2g.com)</label>
        <label><input type="checkbox" id="mapOvDrap" /> D-RAP Absorption (NOAA SWPC)</label>
        <label class="map-ov-heatmap-row"><input type="checkbox" id="mapOvPropHeatmap" /> Propagation Heatmap
          <select id="mapOvPropHeatmapBand" class="map-ov-band-select">
            <option value="80m">80m</option>
            <option value="40m">40m</option>
            <option value="30m">30m</option>
            <option value="20m" selected>20m</option>
            <option value="17m">17m</option>
            <option value="15m">15m</option>
            <option value="12m">12m</option>
            <option value="10m">10m</option>
            <option value="6m">6m</option>
          </select>
        </label>
        <label><input type="checkbox" id="mapOvBandPaths" /> DX Paths (band-colored)</label>
        <label><input type="checkbox" id="mapOvDxpedMarkers" /> DXpedition Markers</label>
        <label><input type="checkbox" id="mapOvTropics" /> Tropics &amp; Arctic Lines</label>
        <label><input type="checkbox" id="mapOvWeatherRadar" /> Weather Radar</label>
        <label><input type="checkbox" id="mapOvCloudCover" /> Cloud Cover (OpenWeatherMap)</label>
        <label><input type="checkbox" id="mapOvLegend" /> Map Legend</label>
      </div>
      <button id="mapOverlayCfgOk">OK</button>
    </div>
  </div>

  <!-- Live Spots config overlay -->
  <div class="splash-overlay hidden" id="liveSpotsCfgSplash">
    <div class="splash-box live-spots-cfg-box">
      <h2>Live Spots Settings</h2>
      <div class="live-spots-cfg-field">
        <label for="liveSpotsModeSelect">Display Mode</label>
        <select id="liveSpotsModeSelect">
          <option value="count">Spot Count</option>
          <option value="distance">Farthest Distance</option>
        </select>
      </div>
      <p class="live-spots-cfg-note">Requires your callsign to be set in Config. Shows where your signal was received in the last hour via PSKReporter.</p>
      <button id="liveSpotsCfgOk">OK</button>
    </div>
  </div>

  <!-- Satellite config overlay -->
  <div class="splash-overlay hidden" id="satCfgSplash">
    <div class="splash-box sat-cfg-box">
      <h2>Satellite Tracking</h2>
      <label for="satApiKey">N2YO API Key</label>
      <input type="text" id="satApiKey" placeholder="Get free key at n2yo.com/api" autocomplete="off" spellcheck="false" style="text-transform:none;" />
      <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:12px;text-align:left;">
        <a href="https://www.n2yo.com/api/" target="_blank" style="color:var(--accent);">Get a free API key (1000 req/hr)</a>
      </div>
      <label for="satMaxTleAge" style="margin-top:8px;">Max TLE Age (days)</label>
      <input type="number" id="satMaxTleAge" min="1" max="30" value="7" style="width:60px;text-align:center;" />
      <div style="font-size:0.7rem;color:var(--text-dim);margin-top:-10px;margin-bottom:12px;text-align:left;">
        Warn when orbital elements exceed this age
      </div>
      <div class="splash-loc-title" style="margin-bottom:8px;">Satellites to Track</div>
      <div class="sat-select-list" id="satSelectList"></div>
      <button id="satCfgOk">OK</button>
    </div>
  </div>

  <!-- Clock face config overlay -->
  <div class="splash-overlay hidden" id="clockCfgSplash">
    <div class="splash-box clock-cfg-box">
      <h2>Clock Face</h2>
      <div class="clock-face-picker" id="clockFacePicker"></div>
      <h3>Complications</h3>
      <div class="splash-widget-list" id="clockCompList"></div>
      <button id="clockCfgOk">OK</button>
    </div>
  </div>

  <!-- Weather alert popup -->
  <div class="splash-overlay hidden wx-alert-splash" id="wxAlertSplash">
    <div class="splash-box">
      <h2>Weather Alerts</h2>
      <div class="wx-alert-list" id="wxAlertList"></div>
      <button id="wxAlertClose">Close</button>
    </div>
  </div>

  <!-- Help modal -->
  <div class="splash-overlay hidden" id="helpSplash">
    <div class="splash-box help-box">
      <h2 id="helpTitle"></h2>
      <div id="helpContent"></div>
      <button id="helpOk">Close</button>
    </div>
  </div>

  <!-- Feedback modal -->
  <div class="splash-overlay hidden" id="feedbackSplash">
    <div class="splash-box feedback-box">
      <h2>Send Feedback</h2>
      <p class="feedback-description">Help us improve HamTab! Your feedback is valuable to us.</p>
      <p class="feedback-discord"><a href="https://discord.gg/Ru3ydQY75U" target="_blank" rel="noopener"><svg class="discord-icon" viewBox="0 0 127.14 96.36" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M107.7 8.07A105.15 105.15 0 0 0 81.47 0a72.06 72.06 0 0 0-3.36 6.83 97.68 97.68 0 0 0-29.11 0A72.37 72.37 0 0 0 45.64 0 105.89 105.89 0 0 0 19.39 8.09C2.79 32.65-1.71 56.6.54 80.21a105.73 105.73 0 0 0 32.17 16.15 77.7 77.7 0 0 0 6.89-11.11 68.42 68.42 0 0 1-10.85-5.18c.91-.66 1.8-1.34 2.66-2.03a75.57 75.57 0 0 0 64.32 0c.87.71 1.76 1.39 2.66 2.03a68.68 68.68 0 0 1-10.87 5.19 77.22 77.22 0 0 0 6.89 11.1 105.25 105.25 0 0 0 32.19-16.14c2.64-27.38-4.51-51.11-18.9-72.15ZM42.45 65.69C36.18 65.69 31 60 31 53.05s5-12.68 11.45-12.68S53.99 46 53.92 53.05c0 6.95-5.11 12.64-11.47 12.64Zm42.24 0C78.41 65.69 73.25 60 73.25 53.05s5-12.68 11.44-12.68S96.23 46 96.16 53.05c0 6.95-5.08 12.64-11.47 12.64Z"/></svg> Join our Discord</a> for release notes and community discussion about features, bugs, or other general HamTab and amateur radio topics.</p>
      <form id="feedbackForm">
        <div class="feedback-field">
          <label for="feedbackName">Name (optional)</label>
          <input type="text" id="feedbackName" name="name" placeholder="Your name or callsign" autocomplete="name" spellcheck="false" />
        </div>
        <div class="feedback-field">
          <label for="feedbackEmail">Email (optional)</label>
          <input type="email" id="feedbackEmail" name="email" placeholder="your@email.com (for follow-up)" autocomplete="email" spellcheck="false" />
          <p class="feedback-privacy-notice">
            🔒 Privacy: Your email is encrypted in your browser before being sent. Only the developers can decrypt it.
            Feedback is stored as a GitHub issue. By submitting, you consent to this processing. You may request deletion anytime.
          </p>
        </div>
        <!-- Honeypot field (hidden from users, catches bots) -->
        <input type="text" name="website" id="feedbackWebsite" style="position:absolute;left:-9999px;width:1px;height:1px;" tabindex="-1" autocomplete="off" />
        <div class="feedback-field">
          <label for="feedbackMessage">Feedback <span class="required">*</span></label>
          <textarea id="feedbackMessage" name="feedback" required minlength="10" maxlength="5000" rows="6" placeholder="Share your thoughts, report bugs, or suggest features..." spellcheck="true"></textarea>
          <div class="feedback-char-count"><span id="feedbackCharCount">0</span> / 5000</div>
        </div>
        <div class="feedback-status hidden" id="feedbackStatus"></div>
        <div class="feedback-buttons">
          <button type="button" id="feedbackCancel">Cancel</button>
          <button type="submit" id="feedbackSubmit">Send Feedback</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Big Clock overlay -->
  <div class="big-clock-overlay hidden" id="bigClockOverlay">
    <div class="big-clock-inner">
      <div class="big-clock-section">
        <div class="big-clock-label">Local</div>
        <div class="big-clock-time" id="bigClockLocal"></div>
        <div class="big-clock-date" id="bigClockDate"></div>
      </div>
      <div class="big-clock-section">
        <div class="big-clock-label">UTC</div>
        <div class="big-clock-time" id="bigClockUtc"></div>
        <div class="big-clock-date" id="bigClockUtcDate"></div>
      </div>
      <div class="big-clock-hint">Click anywhere to close</div>
    </div>
  </div>

  <script src="vendor/leaflet.js"></script>
  <script src="vendor/leaflet.markercluster.js"></script>
  <script src="app.js"></script>
</body>
</html>
