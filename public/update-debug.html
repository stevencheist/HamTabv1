<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HamTab Update Diagnostics</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #1a1a2e; color: #e0e0e0; padding: 24px; max-width: 800px; margin: 0 auto; }
  h1 { font-size: 1.4em; margin-bottom: 4px; color: #00d4aa; }
  .subtitle { font-size: 0.85em; color: #888; margin-bottom: 20px; }
  .subtitle a { color: #6ea8fe; }
  .controls { margin-bottom: 16px; display: flex; gap: 10px; flex-wrap: wrap; }
  button { background: #2a2a4a; color: #e0e0e0; border: 1px solid #444; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-size: 0.9em; }
  button:hover { background: #3a3a5a; }
  button:disabled { opacity: 0.5; cursor: not-allowed; }
  .copied { background: #1a5a3a !important; border-color: #00d4aa !important; }
  #status { font-size: 0.85em; color: #888; margin-bottom: 12px; }
  .check { background: #16213e; border: 1px solid #333; border-radius: 6px; margin-bottom: 8px; overflow: hidden; }
  .check-header { display: flex; align-items: center; padding: 10px 14px; cursor: pointer; gap: 10px; }
  .check-header:hover { background: #1a2744; }
  .indicator { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; }
  .indicator.pass { background: #00d4aa; }
  .indicator.fail { background: #ff4757; }
  .indicator.warn { background: #ffa502; }
  .indicator.pending { background: #555; }
  .check-name { font-weight: 600; font-size: 0.95em; flex: 1; }
  .check-summary { font-size: 0.8em; color: #aaa; max-width: 50%; text-align: right; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .check-detail { display: none; padding: 10px 14px; border-top: 1px solid #333; background: #0f1a2e; font-size: 0.85em; white-space: pre-wrap; word-break: break-all; font-family: 'Cascadia Code', 'Fira Code', monospace; line-height: 1.5; }
  .check.open .check-detail { display: block; }
  .spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid #444; border-top-color: #00d4aa; border-radius: 50%; animation: spin 0.8s linear infinite; }
  @keyframes spin { to { transform: rotate(360deg); } }
  .back-link { display: inline-block; margin-top: 16px; color: #6ea8fe; font-size: 0.85em; }
</style>
</head>
<body>

<h1>Update Diagnostics</h1>
<p class="subtitle">Dry-run test of every update step &mdash; no changes applied</p>

<div class="controls">
  <button id="runBtn">Re-run</button>
  <button id="copyBtn">Copy Results</button>
</div>
<div id="status">Running diagnostics...</div>
<div id="results"></div>
<a class="back-link" href="/">&#8592; Back to HamTab</a>

<script src="update-debug.js"></script>
</body>
</html>
